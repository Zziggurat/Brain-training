/*
 * Estilos modernizados para la aplicación de aprendizaje de tablas
 * Se inspira en aplicaciones educativas móviles con colores vivos y botones redondeados.
 */

 codex/analyze-ziggurat/brain-training-app-functionality-soabp7
/* Variables de áreas seguras para dispositivos con notch o barra */

 codex/analyze-ziggurat/brain-training-app-functionality-7i4udv
/* Variables de áreas seguras para dispositivos con notch o barra */

/* Variables de áreas seguras para dispositivos con notch */
 main
 main
:root {
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
}

/* Configuración global */
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: Arial, Helvetica, sans-serif;
  background-color: #fdd835; /* Amarillo suave de fondo */
  color: #2c3e50;
  /* Evita gestos de zoom y selección de texto */
  overscroll-behavior-y: contain;
  overflow-x: hidden;
  overflow-y: hidden;
  touch-action: manipulation;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-text-size-adjust: 100%;
}

/* Cada pantalla se oculta por defecto y ocupa toda la altura */
.screen {
  display: none;
  /* Ocupar toda la pantalla y permitir desplazamiento interno si es necesario */
  height: 100%;
  box-sizing: border-box;
  position: relative;
  overflow-y: auto;
  padding-top: calc(var(--safe-area-top) + 12px);
  padding-right: calc(var(--safe-area-right) + 12px);
  padding-bottom: calc(var(--safe-area-bottom) + 16px);
  padding-left: calc(var(--safe-area-left) + 12px);
}

.screen.active {
  display: block;
}

/* Ocultar la barra de desplazamiento global en las pantallas donde no debe aparecer (home, learning y training).
   El scroll se habilitará únicamente en tablas y configuración mediante reglas más específicas. */
#home-screen,
#learning-screen,
#training-screen {
  overflow-y: hidden;
}

/* Permitir desplazamiento interno en la pantalla de tablas y configuración */
#tables-screen,
#config-screen {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Botón de configuración en la pantalla de inicio */
.settings-btn {
  position: absolute;
< codex/analyze-ziggurat/brain-training-app-functionality-soabp7
  top: calc(var(--safe-area-top) + 16px);
  left: calc(var(--safe-area-left) + 12px);

 codex/analyze-ziggurat/brain-training-app-functionality-7i4udv
  top: calc(var(--safe-area-top) + 16px);
  left: calc(var(--safe-area-left) + 12px);

  top: 24px;
  left: 20px;
 main
 main
  width: 44px;
  height: 44px;
  border: none;
  border-radius: 50%;
  background-color: #ffffff;
  color: #007aff;
  font-size: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  z-index: 1000;
  min-width: 44px;
  min-height: 44px;
}

/* Tarjeta central en la pantalla de inicio */
.home-card {
  width: 90%;
  /* Aumentamos el tamaño máximo de la tarjeta para que ocupe más espacio en pantallas grandes */
  max-width: 600px;
  margin: 60px auto 40px auto;
  background-color: #ffffff;
  border-radius: 36px;
  padding: 60px 40px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  text-align: center;
}

/* Variación circular para la tarjeta de inicio */
.home-circle {
  max-width: 540px;
  border-radius: 50% 50% 40% 40%;
  padding: 60px 40px;
  position: relative;
}

/* Título principal en la tarjeta de inicio */
#home-title {
  font-size: 38px;
  margin: 0 0 20px 0;
  color: #2c3e50;
  font-weight: bold;
}

/* Contenedor para el selector de operación en la pantalla de inicio */
.operation-toggle {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 20px;
}

.op-btn {
  flex: 1;
  padding: 12px 20px;
  font-size: 18px;
  font-weight: bold;
  border: 2px solid #007aff;
  border-radius: 30px;
  background: #f5f5f5;
  color: #007aff;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}

.op-btn.active {
  background: #007aff;
  color: #ffffff;
}

.op-btn:not(.active):hover {
  background: #e0e0e0;
}

/* Etiqueta debajo de la barra de progreso */
.progress-label {
  font-size: 18px;
  color: #2c3e50;
  margin: 10px 0 24px;
}

/* Botón para eliminar progreso */
.reset-btn {
  display: block;
  width: 90%;
  max-width: 350px;
  margin: 14px auto 36px auto;
  padding: 16px;
  font-size: 20px;
  font-weight: bold;
  background: #e74c3c;
  color: #ffffff;
  border: none;
  border-radius: 24px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: background 0.3s ease;
}

.reset-btn:hover {
  background: #c0392b;
}

/* Título de la pantalla de inicio */
#home-title {
  font-size: 24px;
  margin: 0 0 20px 0;
  color: #2c3e50;
}

/* Contenedor y barra de progreso global */
#progress-wrapper {
  width: 100%;
  background: #e0e0e0;
  border-radius: 14px;
  overflow: hidden;
  height: 32px;
  margin-bottom: 14px;
  position: relative;
}

#progress-bar {
  width: 100%;
  height: 100%;
  background: #e0e0e0;
  border-radius: 16px;
  position: relative;
}

#progress-fill {
  height: 100%;
  width: 0%;
  background: #4caf50;
  border-radius: 12px;
  transition: width 0.3s ease;
}

#progress-text {
  /* Colocar el texto de porcentaje centrado dentro de la barra */
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: #2c3e50;
  margin: 0;
  pointer-events: none;
}

/* Botones principales de la pantalla de inicio */
.home-buttons {
  display: flex;
  flex-direction: column;
  gap: 15px;
  /* Remove top margin because the row container already adds spacing */
  margin-top: 0;
}

/* Estrellas para el progreso individual de cada problema */
.stars {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 4px;
  margin-bottom: 12px;
}

.star {
  font-size: 28px;
  line-height: 1;
  color: #f1c40f; /* Amarillo para estrellas llenas */
}

.star.empty {
  color: #bdc3c7; /* Gris claro para estrellas vacías */
}

/* Tarjeta que envuelve el problema y las estrellas en aprendizaje y entrenamiento */
.problem-card {
  background: #ffffff;
  border-radius: 32px;
  padding: 30px 20px;
  width: 100%;
  max-width: 450px;
  margin: 0 auto 20px auto;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.home-buttons button {
  padding: 22px 0;
  width: 100%;
  max-width: 350px;
  margin: 0 auto;
  font-size: 22px;
  font-weight: bold;
  border: none;
  border-radius: 28px;
  background: #007aff;
  color: #ffffff;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: background 0.3s ease;
}

.home-buttons button:hover {
  background: #005fcc;
}

/* Encabezado de configuración y botones de volver */
.config-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 20px;
}

.config-header h2 {
  margin: 0;
  font-size: 30px;
  color: #2c3e50;
  flex-grow: 1;
  text-align: center;
}

/* Botones redondos para volver en diferentes pantallas */
.back-home-btn {
  width: 48px;
  height: 48px;
  border: none;
  border-radius: 50%;
  background-color: #ffffff;
  color: #007aff;
  font-size: 22px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  top: calc(var(--safe-area-top) + 16px);
  left: calc(var(--safe-area-left) + 12px);
  z-index: 1000;
  min-width: 44px;
  min-height: 44px;
}

/* Cuerpo de configuración */
.config-body {
  padding: 0 30px 30px 30px;
}

.config-section {
  margin-bottom: 30px;
}

.config-section label {
  display: block;
  margin-bottom: 8px;
  font-weight: bold;
  font-size: 18px;
  color: #2c3e50;
}

.mode-options {
  display: flex;
  gap: 20px;
}

.mode-options label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 18px;
}

.interval-inputs {
  display: flex;
  align-items: center;
  gap: 8px;
}

.interval-inputs input[type="number"] {
  width: 100px;
  padding: 8px;
  font-size: 18px;
  border: 1px solid #ccc;
  border-radius: 8px;
}

.config-section input[type="checkbox"] {
  margin-right: 8px;
  transform: scale(1.3);
}

.config-section select,
.config-section input[type="number"] {
  padding: 10px;
  font-size: 18px;
  border: 1px solid #ccc;
  border-radius: 8px;
  width: 100%;
  max-width: 240px;
}

/* Botón guardar en configuración */
#config-save-btn {
  display: block;
  width: 90%;
  max-width: 350px;
  margin: 0 auto 30px auto;
  padding: 16px;
  font-size: 22px;
  font-weight: bold;
  background: #007aff;
  color: #ffffff;
  border: none;
  border-radius: 28px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

#config-save-btn:hover {
  background: #005fcc;
}

/* Top bar utilizada en aprendizaje, entrenamiento y tablas */
.top-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px;
}

.top-bar .progress-text {
  font-size: 22px;
  font-weight: bold;
  color: #2c3e50;
  margin-left: 10px;
}

/* Barra de temporizador en entrenamiento */
#train-timer-bar {
  flex-grow: 1;
  height: 12px;
  background: #e0e0e0;
  border-radius: 6px;
  margin-left: 15px;
  overflow: hidden;
}

#train-timer-fill {
  height: 100%;
  width: 0%;
  background: #007aff;
  border-radius: 6px;
  transition: width 0.2s linear;
}

/* Problema matemático */
.problem {
  font-size: 50px;
  font-weight: bold;
  text-align: center;
  margin: 70px 0 40px 0;
  color: #2c3e50;
}

/* Contenedor para las opciones de respuesta o el teclado */
.answer-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  margin-top: 20px;
}

/* Estilo de opción de respuesta en modo múltiple */
.answer-option {
  padding: 24px;
  width: 100%;
  max-width: 450px;
  background: #f5f5f5;
  border: 2px solid #ccc;
  border-radius: 28px;
  text-align: center;
  font-size: 30px;
  font-weight: 700;
  color: #2c3e50;
  cursor: pointer;
  transition: background 0.2s, border-color 0.2s;
  /* Evitar que en iOS quede un color gris oscuro al tocar o enfocar */
  -webkit-tap-highlight-color: transparent;
  outline: none;
}

/* Tarjeta del problema: fija altura y no apiles en absoluto */
.problem-card{
  position: relative;
  perspective: 1000px;
  min-height: 210px;         /* << asegura espacio para la pregunta */
}

/* La cara frontal NO va en absolute; así no se superpone con otros nodos */
.card-front{
  position: relative;        /* << antes era absolute */
  width: 100%;
  height: auto;
  backface-visibility: hidden;
  transform-style: preserve-3d;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Ajuste del texto de la operación para que no “salte” */
.problem{
  line-height: 1.1;
}

/* Al responder correctamente en modo aprendizaje o entrenamiento, hacemos
   girar la cara frontal de la tarjeta. Durante la animación, ocultamos
   temporalmente el contenido en el punto medio (180°) para evitar que
   se vean los números al revés. La animación rota la cara frontal 180°
   y luego regresa a su posición original mientras restablece la opacidad. */
.problem-card.flip .card-front {
  animation: flip-card 0.6s forwards;
}

@keyframes flip-card {
  0% {
    transform: rotateY(0deg);
    opacity: 1;
  }
  49% {
    transform: rotateY(88deg);
    opacity: 0;
  }
  50% {
    transform: rotateY(180deg);
    opacity: 0;
  }
  51% {
    transform: rotateY(180deg);
    opacity: 0;
  }
  100% {
    transform: rotateY(360deg);
    opacity: 1;
  }
}

/* Estilos para la pantalla de progreso */
/* La pantalla de progreso utiliza un layout flexible para que el mapa de calor
   ocupe todo el alto disponible y el resultado se muestre en la parte inferior. */
#progress-screen {
  /* se oculta por defecto mediante la clase .screen; aquí solo definimos la estructura */
  height: 100%;
  box-sizing: border-box;
  padding: calc(var(--safe-area-top) + 24px) calc(var(--safe-area-right) + 20px)
    calc(var(--safe-area-bottom) + 24px) calc(var(--safe-area-left) + 20px);
  flex-direction: column;
}

.progress-top-bar {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 10px;
}

.progress-top-bar h2 {
  margin: 0;
  flex-grow: 1;
  text-align: center;
  font-size: 26px;
  color: #2c3e50;
}

#progress-back-btn {
  width: 48px;
  height: 48px;
  border: none;
  border-radius: 50%;
  background-color: #ffffff;
  color: #007aff;
  font-size: 22px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  top: calc(var(--safe-area-top) + 16px);
  left: calc(var(--safe-area-left) + 12px);
  z-index: 1000;
  min-width: 44px;
  min-height: 44px;
}

/* Contenedor del mapa de calor */
/* El contenedor del mapa de calor ocupa el espacio disponible y permite
   desplazamiento cuando la cuadrícula es más grande que el área visible.
   Se ocultan las barras de desplazamiento para un aspecto más limpio. */
#heatmap-container {
  /* Ocupa todo el espacio disponible debajo de la barra superior */
  flex-grow: 1;
  overflow: auto;
  margin-bottom: 20px;
  padding-right: 4px;
  /* Ocultar barras de desplazamiento para un aspecto limpio */
  scrollbar-width: none; /* Ocultar barra de desplazamiento en Firefox */
}
#heatmap-container::-webkit-scrollbar {
  display: none; /* Ocultar barra de desplazamiento en WebKit/Chrome */
}

.heatmap-grid {
  display: grid;
  /* Las columnas se definen dinámicamente en JavaScript dependiendo del tamaño del intervalo.
     Mantener un tamaño fijo de celda para permitir desplazamiento cuando sea necesario. */
  /* Tamaño de fila fijo para mantener proporción de las celdas en todos los intervalos */
  grid-auto-rows: 28px;
  gap: 2px;
  justify-content: start;
}

.heatmap-header {
  background: #ffffff;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 14px;
  color: #2c3e50;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  z-index: 1;
}

/* Encabezados de columna (fila superior). Se mantienen visibles al hacer scroll vertical. */
.column-header {
  position: sticky;
  top: 0;
  z-index: 2;
}

/* Encabezados de fila (columna izquierda). Se mantienen visibles al hacer scroll horizontal. */
.row-header {
  position: sticky;
  left: 0;
  z-index: 1;
}

/* Celda de esquina superior izquierda: permanece fija en ambas direcciones. */
.corner-header {
  position: sticky;
  top: 0;
  left: 0;
  z-index: 3;
}

.heatmap-cell {
  /* Las celdas tienen un tamaño fijo que coincide con las columnas definidas en JavaScript */
  width: 28px;
  height: 28px;
  border-radius: 4px;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Colores para las celdas según estrellas */
.heatmap-grey {
  background: #e0e0e0;
}

.heatmap-orange {
  background: #e67e22;
}

.heatmap-green {
  background: #2ecc71;
}

/* Tarjeta para mostrar el resultado seleccionado en la pantalla de progreso */
.result-card {
  /* Tarjeta de resultado en la pantalla de progreso: tamaño compacto y color celeste */
  /* Tarjeta de resultado de la pantalla de progreso: color celeste y tamaño compacto */
  background: #e0f4ff;
  border-radius: 24px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  padding: 16px 32px;
  font-size: 28px;
  color: #2c3e50;
  text-align: center;
  /* El ancho se adapta al contenido con un máximo relativo para evitar que ocupe todo el ancho */
  width: fit-content;
  max-width: 80%;
  min-width: 200px;
  margin: 10px auto;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Texto de retroalimentación para el mapa de calor */
#heatmap-feedback {
  margin-top: 10px;
  font-size: 18px;
  font-weight: bold;
  color: #2c3e50;
  text-align: center;
}

/* Tarjetas para métricas y meta diaria */
.metrics-card,
.goal-card {
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  padding: 20px;
  margin-bottom: 20px;
}

.metrics-card h3,
.goal-card h3 {
  margin-top: 0;
  margin-bottom: 12px;
  font-size: 22px;
  color: #007aff;
}

/* Contenedor de círculos para la meta diaria */
.goal-circles {
  display: flex;
  gap: 6px;
  justify-content: center;
}

.goal-circle {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #e0e0e0;
}

.goal-circle.completed {
  background: #2ecc71;
}

/* Botón para abrir la pantalla de progreso en la pantalla de inicio */
#home-progress-btn {
  padding: 22px 0;
  width: 100%;
  max-width: 350px;
  margin: 0 auto;
  font-size: 22px;
  font-weight: bold;
  border: none;
  border-radius: 28px;
  background: #007aff;
  color: #ffffff;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: background 0.3s ease;
  display: block;
}

#home-progress-btn:hover {
  background: #005fcc;
}

/* ===== Panel de Asistente ===== */
/* Contenedor principal del home: se organiza verticalmente con tarjeta y luego fila de botones+asistente */
.home-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
}
/* Fila inferior que agrupa la lista de botones y el panel del asistente */
.home-bottom-row {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 30px;
  margin-top: 40px;
  width: 100%;
  box-sizing: border-box;
  padding: 0 20px;
}
/* Panel del asistente: ventana blanca compacta con scroll interno */
.assistant-panel {
  /* Assistant panel: rectangular card with its own scroll bar */
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  padding: 12px;
  width: 280px;
  height: 350px;
  overflow-y: scroll;
  display: flex;
  flex-direction: column;
  gap: 0; /* separators will define spacing */
  /* Always show scroll bar inside the assistant panel to hint more content */
}

/* Custom scroll bar styling for assistant panel */
.assistant-panel::-webkit-scrollbar {
  width: 6px;
}
.assistant-panel::-webkit-scrollbar-track {
  background: #f5f5f5;
  border-radius: 8px;
}
.assistant-panel::-webkit-scrollbar-thumb {
  background: #007aff;
  border-radius: 8px;
}
/* Tarjeta individual del asistente */
.assistant-card {
  /* Flatten the assistant cards and add separators */
  background: #ffffff;
  border-radius: 0;
  box-shadow: none;
  padding: 16px 12px;
  border-bottom: 1px solid #e0e0e0;
  color: #2c3e50;
}

/* Remove separator from last assistant card */
.assistant-card:last-child {
  border-bottom: none;
}
.assistant-card h4 {
  margin: 0 0 4px 0;
  font-size: 16px;
  font-weight: bold;
  color: #007aff;
}
.assistant-card p {
  margin: 0;
  font-size: 14px;
  color: #2c3e50;
}
.assistant-card .assistant-progress {
  font-size: 12px;
  color: #888;
  margin-bottom: 8px;
}
.assistant-card button {
  width: 100%;
  padding: 8px 0;
  border: none;
  border-radius: 20px;
  background: #007aff;
  color: #ffffff;
  font-size: 14px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s;
}
.assistant-card button:hover {
  background: #005fcc;
}
.assistant-card .assistant-actions {
  display: flex;
  justify-content: space-between;
  margin-top: 8px;
}
.assistant-card .assistant-actions button {
  background: none;
  border: none;
  color: #007aff;
  font-size: 12px;
  padding: 4px;
  cursor: pointer;
}

/* Estilos para el botón de siguiente en problemas escritos */
/* Botón para saltar preguntas en modo escrito */
#learn-skip-btn {
  padding: 12px 16px;
  width: auto;
  font-size: 16px;
  font-weight: bold;
  border: none;
  border-radius: 20px;
  background: #e74c3c;
  color: #ffffff;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  display: none;
  position: fixed;
  right: 20px;
  bottom: 20px;
  transform: none;
}

#learn-skip-btn:hover {
  background: #c0392b;
}

/* Mantener el mismo aspecto para botones de respuesta deshabilitados que no
   han sido marcados como correctos o incorrectos. Sin esta regla Safari iOS
   aplica un gris oscuro a los botones deshabilitados, dando la sensación de que
   uno de los botones está seleccionado cuando en realidad todos deberían tener
   el mismo color de fondo. */
.answer-option:disabled:not(.correct):not(.incorrect) {
  background: #f5f5f5;
  border-color: #ccc;
  color: inherit;
  opacity: 1;
}

/* También aseguramos que los botones del teclado numérico mantengan
   su apariencia cuando están deshabilitados (por ejemplo después de enviar
   una respuesta). */
/* Para cualquier botón del teclado numérico que esté deshabilitado, anulamos la opacidad reducida
   predeterminada en algunos navegadores. Si se trata de botones especiales como borrar o enviar,
   se mantiene su color de fondo original. */
.num-btn:disabled {
  opacity: 1;
}

/* Para las opciones del teclado numérico estándar (sin colores especiales) devolvemos
   el mismo fondo y borde que cuando están activos para que no aparezcan grisados. */
.num-btn:disabled:not(.delete-btn):not(.submit-btn) {
  background: #f5f5f5;
  border-color: #ccc;
  color: inherit;
}

/* Mantener el mismo color para los estados focus y active en los botones de opción */
.answer-option:focus,
.answer-option:active {
  background: #f5f5f5;
  border-color: #ccc;
  color: inherit;
  outline: none;
}

/* Botones del teclado numérico: eliminar highlight azul/gris en iOS */
.num-btn {
  -webkit-tap-highlight-color: transparent;
  outline: none;
}

.answer-option:hover {
  /* Mantener el mismo color al pasar el cursor para evitar que una opción se vea más oscura */
  background: #f5f5f5;
}

.answer-option.correct {
  background: #27ae60;
  color: #ffffff;
  border-color: #27ae60;
}

.answer-option.incorrect {
  background: #c0392b;
  color: #ffffff;
  border-color: #c0392b;
}

/* Display para respuestas escritas */
.numeric-display {
  font-size: 36px;
  font-weight: bold;
  text-align: center;
  background: #ffffff;
  border: 2px solid #ccc;
  border-radius: 20px;
  padding: 16px 24px;
  width: 100%;
  max-width: 450px;
  min-height: 70px;
  box-sizing: border-box;
  color: #2c3e50;
}

.numeric-display.correct {
  border-color: #27ae60;
  color: #27ae60;
}

.numeric-display.incorrect {
  border-color: #c0392b;
  color: #c0392b;
}

/* Teclado numérico */
.num-keypad {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  width: 100%;
  max-width: 450px;
}

.num-btn {
  padding: 24px 0;
  font-size: 28px;
  font-weight: bold;
  background: #f5f5f5;
  border: 2px solid #ccc;
  border-radius: 20px;
  cursor: pointer;
  transition: background 0.2s;
  color: #2c3e50;
}

.num-btn:hover {
  background: #e0e0e0;
}

/* Botones especiales en el teclado */
.delete-btn {
  background: #e74c3c;
  color: #ffffff;
  border-color: #e74c3c;
}

.submit-btn {
  background: #27ae60;
  color: #ffffff;
  border-color: #27ae60;
}

/* Mensajes de retroalimentación */
.feedback {
  margin-top: 20px;
  font-size: 18px;
  font-weight: bold;
  text-align: center;
  min-height: 24px;
}

/* Ocultar elementos de forma elegante */
.hidden {
  display: none !important;
}

/* Puntuación al terminar */
.score {
  margin-top: 10px;
  font-size: 18px;
  font-weight: bold;
  text-align: center;
}

/* Estilos para la visualización de tablas */
.tables-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  padding: 20px;
}

.table-card {
  background: #ffffff;
  border-radius: 16px;
  padding: 15px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  width: 160px;
}

.table-card h3 {
  margin-top: 0;
  margin-bottom: 8px;
  text-align: center;
  font-size: 20px;
  color: #007aff;
}

.table-card ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.table-card li {
  font-size: 16px;
  line-height: 1.4;
  color: #333333;
}

/* Barra de entrenamiento específico en la pantalla de tablas */
.specific-training-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 10px;
  margin: 0 20px;
}

.specific-label {
  font-weight: bold;
  color: #2c3e50;
}

#specific-toggle {
  transform: scale(1.2);
}

#start-specific-btn {
  padding: 10px 14px;
  font-size: 16px;
  font-weight: bold;
  border: none;
  border-radius: 20px;
  background: #007aff;
  color: #ffffff;
  cursor: pointer;
  box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
}

#start-specific-btn:hover {
  background: #005fcc;
}

/* Estilos para cabecera y filas de cada tabla */
.table-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}

.table-header h3 {
  margin: 0;
  font-size: 20px;
  color: #007aff;
}

.table-header .master-checkbox {
  transform: scale(1.2);
}

.table-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 2px 0;
  font-size: 16px;
  color: #333333;
}

.table-row .row-checkbox {
  transform: scale(1.1);
}

/* Botones de control en aprendizaje y entrenamiento */
#learn-next-btn,
#train-restart-btn {
  padding: 15px 0;
  width: 100%;
  max-width: 260px;
  margin: 20px auto;
  font-size: 18px;
  font-weight: bold;
  border: none;
  border-radius: 20px;
  background: #007aff;
  color: #ffffff;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  display: block;
}

#learn-next-btn:hover,
#train-restart-btn:hover {
  background: #005fcc;
}

/* ====== HOME – FIX iPad (2 columnas) ====== */
/* Ajusta SOLO estas variables */
:root{
  --home-max: 1200px;        /* ancho total del bloque */
  --home-gap: 24px;          /* separación entre columnas */

  /* Botones (los 5) */
  --btn-width-max: 720px;    /* tope superior de ancho del botón */
  --btn-width-vw: 52vw;      /* ancho fluido: reduce en pantallas chicas (ajusta 48–54vw) */
  --btn-height: 90px;
  --btn-font: 28px;
  --btn-offset: 146px;         /* desplaza TODOS los botones: +derecha / -izquierda */

  /* Asistente */
  --assistant-width: 130px;  /* ancho del panel derecho */
  --assistant-offset: -5px;   /* desplaza el asistente: +derecha / -izquierda */

  /* Mantener 2 columnas hasta pantallas MUY angostas */
  --two-col-breakpoint: 820px; /* antes estaba 1024px; el iPad es 1024, por eso se apilaba */
}

/* Contenedor de botones + asistente */
#home-screen .home-bottom-row,
#home-screen .home-layout,
#home-screen .buttons-and-coach,
#home-screen .content-wrap{
  display: grid;
  grid-template-columns:
    minmax(0, 1fr)                    /* col. izquierda: se estira pero puede encoger */
    minmax(260px, var(--assistant-width));  /* col. derecha: asistente */
  column-gap: var(--home-gap);
  align-items: start;
  max-width: var(--home-max);
  margin: 10px auto 40px;
}

/* Columna izquierda: stack de botones */
#home-screen .home-buttons{
  position: relative;
  left: var(--btn-offset);
  display: flex;
  flex-direction: column;
  gap: 18px;
  align-items: center;                /* centrados bajo la burbuja */
}

/* Botones fluidos: se encogen para que quepan con el asistente */
#home-screen .home-buttons > button,
#home-screen .home-buttons .primary,
#home-screen .home-buttons .home-button{
  width: clamp(420px, var(--btn-width-vw), var(--btn-width-max));
  max-width: 92vw;
  height: var(--btn-height);
  font-size: var(--btn-font);
  border-radius: 22px;
  display: inline-flex; justify-content: center; align-items: center;
}

/* Columna derecha: asistente */
#home-screen .assistant-panel,
#home-screen #assistant-panel,
#home-screen .assistant-card{
  width: var(--assistant-width);
  max-width: var(--assistant-width);
  position: relative;
  left: var(--assistant-offset);
  justify-self: end; /* a la derecha de su columna */
}

/* Apilar SOLO en pantallas MUY angostas */
@media (max-width:  var(--two-col-breakpoint)){
  #home-screen .home-bottom-row,
  #home-screen .home-layout,
  #home-screen .buttons-and-coach,
  #home-screen .content-wrap{
    grid-template-columns: 1fr;
  }
  #home-screen .home-buttons{ left: 0; }
  #home-screen .assistant-panel,
  #home-screen #assistant-panel,
  #home-screen .assistant-card{
    left: 0; width: auto; max-width: none; justify-self: stretch;
  }
}

/* ——— Pulido visual de la tarjeta ——— */
.card-front{
  /* ya la dejaste en position: relative */
  display: flex;
  flex-direction: column;    /* estrellas arriba, operación abajo */
  align-items: center;       /* todo centrado */
  justify-content: center;
  gap: 12px;                 /* separación entre estrellas y operación */
  padding: 16px 20px;        /* aire interno */
}

.stars{
  display: flex;
  gap: 6px;                  /* separación entre estrellas */
  align-items: center;
  justify-content: center;
}

.problem-card{
  min-height: 200px;         /* baja o sube este valor (180–230) a tu gusto */
}

/* Ajuste suave en pantallas más pequeñas */
@media (max-width: 768px){
  .problem-card{ min-height: 190px; }
  .problem{ line-height: 1.1; }
}
 codex/implement-ui-fixes-for-iphone-and-ipad-d33a7w

 codex/implement-ui-fixes-for-iphone-and-ipad-vkz7ui

 codex/implement-ui-fixes-for-iphone-and-ipad-d2bddi

 codex/implement-ui-fixes-for-iphone-and-ipad-37yklq
 main
 main
main
/* === Ajustes adicionales de compatibilidad para pantallas pequeñas y zonas seguras === */
:root {
  --header-safe-offset: calc(env(safe-area-inset-top, 0px) + 72px);
}

.screen {
  padding-top: var(--header-safe-offset);
}

#home-screen {
  padding-top: calc(env(safe-area-inset-top, 0px) + 48px);
}

.config-header,
.top-bar,
.progress-top-bar {
  padding-top: 0;
  margin-top: 0;
  padding-left: calc(env(safe-area-inset-left, 0px) + 20px);
  padding-right: calc(env(safe-area-inset-right, 0px) + 20px);
}

#progress-screen {
  padding-top: var(--header-safe-offset);
}

#config-screen .config-body,
#config-screen .config-footer {
  padding-left: calc(env(safe-area-inset-left, 0px) + 20px);
  padding-right: calc(env(safe-area-inset-right, 0px) + 20px);
}

@media (max-width: 768px) {
  .home-card {
    margin: 32px auto;
    padding: 40px 24px;
  }

  .home-buttons button {
    font-size: 20px;
    padding: 18px 0;
  }

  .config-header h2 {
    font-size: 26px;
  }

  .mode-options {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .interval-inputs {
    flex-wrap: wrap;
  }

  .problem {
    font-size: 42px;
    margin: 48px 0 28px;
  }

  .problem-card {
    padding: 24px;
  }
}

@media (max-width: 480px) {
  .config-body {
    padding-left: calc(env(safe-area-inset-left, 0px) + 16px);
    padding-right: calc(env(safe-area-inset-right, 0px) + 16px);
  }

  .config-section {
    margin-bottom: 24px;
  }

  .home-buttons button {
    font-size: 18px;
    padding: 16px 0;
  }

  .problem {
    font-size: 36px;
    margin: 36px 0 24px;
  }
}
 codex/implement-ui-fixes-for-iphone-and-ipad-d33a7w

 codex/implement-ui-fixes-for-iphone-and-ipad-vkz7ui

 codex/implement-ui-fixes-for-iphone-and-ipad-d2bddi


 main
 main
 main
 main
/* === Ajustes para zonas seguras y layout en iOS === */
:root {
  --vh: 1vh;
}

@supports (height: 100dvh) {
  :root {
    --vh: 1dvh;
  }
}

html,
body {
  height: 100%;
}

#app {
  max-width: 880px;
  margin: 0 auto;
  min-height: calc(var(--vh) * 100);
  display: flex;
  flex-direction: column;
  padding-bottom: calc(24px + env(safe-area-inset-bottom, 0px));
}

.settings-btn,
.back-home-btn,
#progress-back-btn {
  position: fixed;
  top: calc(env(safe-area-inset-top, 0px) + 16px);
  left: calc(env(safe-area-inset-left, 0px) + 16px);
  z-index: 1000;
  min-width: 44px;
  min-height: 44px;
}

.back-home-btn + .settings-btn,
.screen .back-home-btn ~ .settings-btn {
  left: calc(env(safe-area-inset-left, 0px) + 16px + 56px);
}

@media (max-width: 420px) {
  .home-bottom-row {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }

  .home-buttons {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .assistant-panel {
    width: 100%;
    max-width: 100%;
    margin: 12px 0 0 0;
    position: static;
  }
}
 codex/implement-ui-fixes-for-iphone-and-ipad-d33a7w

codex/implement-ui-fixes-for-iphone-and-ipad-vkz7ui

 codex/implement-ui-fixes-for-iphone-and-ipad-d2bddi
 main
main

#progress-screen {
  display: none;
}

#progress-screen.active {
  display: flex;
}

/* === Ajustes adicionales para alinear contenido con el engranaje y centrar progreso === */
:root {
  --floating-header-clearance: calc(env(safe-area-inset-top, 0px) + 104px);
}

.screen {
  padding-top: var(--floating-header-clearance);
}

#home-screen {
  padding-top: calc(env(safe-area-inset-top, 0px) + 96px);
}

.config-header,
.top-bar,
.progress-top-bar {
  margin-top: 0;
  margin-bottom: 24px;
  padding-top: 0;
}

#config-screen .config-body,
#config-screen .config-footer {
  margin-top: 0;
}

#learning-screen .problem-card,
#training-screen .problem-card {
  margin-top: 24px;
}

#progress-screen {
  padding-top: var(--floating-header-clearance);
}

#progress-screen.active {
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 24px;
  text-align: center;
  min-height: calc(var(--vh) * 100 - 24px - env(safe-area-inset-bottom, 0px));
  padding-bottom: calc(24px + env(safe-area-inset-bottom, 0px));
}

#progress-screen.active .progress-top-bar {
  width: min(560px, 100%);
  justify-content: center;
}

#progress-screen.active #heatmap-container {
  flex-grow: 0;
  width: min(560px, 100%);
  max-height: 60vh;
  margin: 0 auto;
}

#progress-screen.active #heatmap-container .heatmap-grid {
  justify-content: center;
}

#progress-screen.active .result-card,
#progress-screen.active #progress-wrapper,
#progress-screen.active .goal-card,
#progress-screen.active .metrics-card {
  margin-left: auto;
  margin-right: auto;
}

@media (max-width: 480px) {
  #progress-screen.active {
    gap: 20px;
  }

  #progress-screen.active #heatmap-container {
    max-height: none;
  }

  #home-screen .home-card,
  #home-screen .home-buttons,
  #home-screen .assistant-panel {
    width: 100%;
    max-width: 100%;
  }

  #home-screen .home-buttons button {
    width: 100%;
    max-width: none;
  }

  #home-screen .home-bottom-row {
    padding-left: calc(env(safe-area-inset-left, 0px) + 12px);
    padding-right: calc(env(safe-area-inset-right, 0px) + 12px);
  }
}

 codex/implement-ui-fixes-for-iphone-and-ipad-d33a7w

 codex/implement-ui-fixes-for-iphone-and-ipad-vkz7ui
 main
@media (max-width: 480px) {
  :root {
    --floating-header-clearance: calc(env(safe-area-inset-top, 0px) + 120px);
  }

  #home-screen {
    padding-top: calc(env(safe-area-inset-top, 0px) + 120px);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 28px;
  }

  #home-screen .home-container {
    width: 100%;
    max-width: 520px;
    padding: 0 calc(env(safe-area-inset-left, 0px) + 20px) calc(32px + env(safe-area-inset-bottom, 0px));
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 28px;
  }

  #home-screen .home-card {
    width: 100%;
    margin: 0;
  }

  #home-screen .home-card.home-circle {
    border-radius: 60% 60% 45% 45%;
    padding: 52px 28px 44px;
  }

  #home-screen .home-bottom-row {
    width: 100%;
    margin-top: 0;
    align-items: center;
    gap: 20px;
  }

  #home-screen .home-buttons {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
  }

  #home-screen .home-buttons button {
    width: 100%;
    max-width: none;
    min-height: 68px;
    font-size: 20px;
  }

  #assistant-panel.assistant-panel,
  #home-screen #assistant-panel {
    width: 100%;
    max-width: 100%;
    position: static;
  }
}
 codex/implement-ui-fixes-for-iphone-and-ipad-d33a7w
/* === Ajustes adicionales para vista móvil y progreso === */
@media (max-width: 480px) {
  #home-screen .home-buttons {
    gap: 20px;
  }

  #home-screen .home-buttons button {
    min-height: 86px;
    padding: 20px 28px;
    font-size: 18px;
    line-height: 1.3;
    border-radius: 30px;
  }

  #home-screen .assistant-panel,
  #home-screen #assistant-panel {
    padding: 18px 20px;
    gap: 16px;
  }

  #home-screen .assistant-card {
    padding: 18px 16px;
    border-radius: 18px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
  }

  #home-screen .assistant-card h4 {
    font-size: 18px;
  }

  #home-screen .assistant-card p {
    font-size: 15px;
    line-height: 1.4;
  }

  #home-screen .assistant-card .assistant-progress {
    font-size: 14px;
  }

  #home-screen .assistant-card button {
    font-size: 16px;
    padding: 12px 0;
    border-radius: 22px;
  }
}

/* Ocultar la barra de desplazamiento visible del panel del asistente */
.assistant-panel {
  overflow-y: auto;
  scrollbar-width: none;
}

.assistant-panel::-webkit-scrollbar {
  display: none;
}

/* Evitar que la sección de progreso quede cortada en la parte inferior */
#progress-screen.active {
  min-height: calc(var(--vh) * 100);
  padding-bottom: calc(56px + env(safe-area-inset-bottom, 0px));
}

#progress-screen.active .progress-top-bar,
#progress-screen.active #heatmap-container,
#progress-screen.active .metrics-card,
#progress-screen.active .goal-card,
#progress-screen.active #progress-wrapper {
  width: min(560px, 100%);
  margin-left: auto;
  margin-right: auto;
}



 codex/implement-ui-fixes-for-iphone-and-ipad-37yklq

codex/implement-ui-fixes-for-iphone-and-ipad-wclj5g

 codex/implement-ui-fixes-for-iphone-and-ipad-409f5a
 main
main

#progress-screen {
  display: none;
}

#progress-screen.active {
  display: flex;
}
 codex/implement-ui-fixes-for-iphone-and-ipad-37yklq

codex/implement-ui-fixes-for-iphone-and-ipad-wclj5g


 main
main
 main
main
 main
main
